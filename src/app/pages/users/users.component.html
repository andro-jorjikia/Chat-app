<div class="users-page">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-text">
        <h1 class="page-title">Connect & Chat</h1>
        <p class="page-subtitle">Find friends and start conversations</p>
      </div>
    </div>
    <div class="header-status">
      <div class="online-indicator">
        <div class="status-dot pulse"></div>
        <span class="status-label">Online</span>
      </div>
    </div>
  </div>

  <!-- Users Grid -->
  <div class="users-container">
    <ng-container *ngIf="users$ | async as users; else loadingState">
      <div class="users-grid" *ngIf="users.length > 0; else emptyState">
        <div *ngFor="let user of users; let i = index; trackBy: trackByUserId"
             class="user-card"
             [style.animation-delay.ms]="i * 100">
          <div class="card-header">
            <div class="avatar">
              <span class="avatar-text">{{ (user.username || 'U').charAt(0).toUpperCase() }}</span>
            </div>
            <div class="user-status">
              <div class="status-dot online"></div>
            </div>
          </div>

          <div class="card-content">
            <h3 class="user-name">{{ user.username }}</h3>
          </div>

          <div class="card-actions">
            <button class="action-btn chat-btn"
                    (click)="startChat(user.peerId)"
                    title="Start chat">
              <span class="btn-icon">ðŸ’¬</span>
              <span class="btn-text">Chat</span>
            </button>

            <button class="action-btn audio-btn"
                    (click)="callAudio(user.peerId)"
                    title="Audio call">
              <span class="btn-icon">ðŸ“ž</span>
              <span class="btn-text">Audio</span>
            </button>

            <button class="action-btn video-btn"
                    (click)="callVideo(user.peerId)"
                    title="Video call">
              <span class="btn-icon">ðŸ“¹</span>
              <span class="btn-text">Video</span>
            </button>
          </div>
        </div>
      </div>
    </ng-container>

    <!-- Loading State -->
    <ng-template #loadingState>
      <div class="loading-state">
        <div class="loading-spinner"></div>
        <p class="loading-text">Looking for users...</p>
      </div>
    </ng-template>

    <!-- Empty State -->
    <ng-template #emptyState>
      <div class="empty-state">
        <h3 class="empty-title">No users online</h3>
        <div class="empty-actions">
          <button class="refresh-btn" (click)="refreshUsers()">
            Refresh
          </button>
        </div>
      </div>
    </ng-template>
  </div>
</div>
